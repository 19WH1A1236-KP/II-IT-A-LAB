#include<stdio.h>
#include<stdlib.h>

int mutex=1, full=0, empty=5, x=0;
void producer()
{
    --mutex;
    ++full;
    --empty;
    x++;

    printf("Producer produces item %d", x);
    ++mutex;
}
void consumer()
{
    --mutex;
    --full;
    ++empty;

    printf("Consumer consumes item %d", x);
    x--;
    ++mutex;
}

int main()
{
    int n, i;
    printf("1-for Producer""\n2-for Consumer""\n3-for Exit");

#pragma omp critical
    for(i=1; i>0; i++)
    {
        printf("\nEnter your choice:");
        scanf("%d", &n);
        switch(n){

            case 1:
                if((mutex == 1) && (empty != 0))
                {
                    producer();
                }
                else{
                    printf("Buffer is full");
                }
                break;

            case 2:
                if((mutex == 1) && (full != 0))
                {
                    consumer();
                }
                else{
                    printf("Buffer is Empty");
                }
                break;

            case 3:
                exit(0);
                break;
       }
    }
}
